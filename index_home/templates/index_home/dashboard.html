{% extends "index_home/base.html" %}
{% block content %}
<div class="row mb-5">
  <div class="col-xl-3 col-lg-6">
    <div class="card card-stats mb-4 mb-xl-0">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <h5 class="card-title text-uppercase text-muted mb-0">Recipes</h5>
            <span class="h2 font-weight-bold mb-0">{{Total_Recipe.No_of_Recipes}}</span>
          </div>
          <div class="col-auto">
            <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
              <i class="fas fa-hamburger"></i>
            </div>
          </div>
        </div>
<!--        <p class="mt-3 mb-0 text-muted text-sm">-->
<!--          <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>-->
<!--          <span class="text-nowrap">Since last month</span>-->
<!--        </p>-->
      </div>
    </div>
  </div>
  <div class="col-xl-3 col-lg-6">
    <div class="card card-stats mb-4 mb-xl-0">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <h5 class="card-title text-uppercase text-muted mb-0">Users</h5>
            <span class="h2 font-weight-bold mb-0">{{Total_Users.total}}</span>
          </div>
          <div class="col-auto">
            <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
              <i class="fas fa-users"></i>
            </div>
          </div>
        </div>
<!--        <p class="mt-3 mb-0 text-muted text-sm">-->
<!--          <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> 3.48%</span>-->
<!--          <span class="text-nowrap">Since last week</span>-->
<!--        </p>-->
      </div>
    </div>
  </div>
  <div class="col-xl-3 col-lg-6">
    <div class="card card-stats mb-4 mb-xl-0">
      <div class="card-body">
        <div class="row">
          <div class="col">
            <h5 class="card-title text-uppercase text-muted mb-0">Submitted Recipe</h5>
            <span class="h2 font-weight-bold mb-0">{{Total_Submitted.total}}</span>
          </div>
          <div class="col-auto">
            <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
              <i class="fas fa-users"></i>
            </div>
          </div>
        </div>
<!--        <p class="mt-3 mb-0 text-muted text-sm">-->
<!--          <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>-->
<!--          <span class="text-nowrap">Since last 3 months</span>-->
<!--        </p>-->
      </div>
    </div>
  </div>
  <div class="col-xl-3 col-lg-6">
<!--    <div class="card card-stats mb-4 mb-xl-0">-->
<!--      <div class="card-body">-->
<!--        <div class="row">-->
<!--          <div class="col">-->
<!--            <h5 class="card-title text-uppercase text-muted mb-0">Online</h5>-->
<!--            <span class="h2 font-weight-bold mb-0">{{Total_Users.total}}</span>-->
<!--          </div>-->
<!--          <div class="col-auto">-->
<!--            <div class="icon icon-shape bg-info text-white rounded-circle shadow">-->
<!--              <i class="fas fa-users"></i>-->
<!--            </div>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
  </div>
</div>

<div class="card bg-secondary shadowv mb-5">
    <div class="card-header bg-white border-0">
      <div class="row align-items-center">
        <div class="col-8">
          <h3 class="mb-0">Featured Recipes</h3>
        </div>
        <div class="col-4 text-right">
          <button onclick="printData();" class="btn btn-sm btn-primary">Print</button>
        </div>
      </div>
    </div>
    <div class="card-body">
      <h6 class="heading-small text-muted mb-4">
        Recipe Information
      </h6>
        <div class="pl-lg-4">
          <div class="row">
            <div class="col">
              <div class="card shadow">
                <div class="card-header border-0">
                  <h3 class="mb-0">Recipes table</h3>
                </div>
                <div class="table-responsive">
                  <table id="myTable2" class="table align-items-center table-flush">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">Recipe</th>
                    <th scope="col">Author</th>
                    <th scope="col">Hearts</th>
                    <th scope="col">Score</th>
                  </tr>
                </thead>
                <tbody>
                {% for b in ree.itertuples %}
                  <tr>
                      <td>
                        <a class="dropdown-item" href="{% url 'recipe-detail' b.id %}">{{ b.name | truncatechars:30 }}</a>
                      </td>
                      <td> {{ b.username }}</td>
                      <td> {{ b.total_hearts }}</td>
                      <td> {{ b.score }}</td>
                  </tr>
                {% endfor %}
                </tbody>
              </table>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
</div>

<div class="card bg-secondary shadow">
    <div class="card-header bg-white border-0">
      <div class="row align-items-center">
        <div class="col-8">
          <h3 class="mb-0">Pending Recipes</h3>
        </div>
        <div class="col-4 text-right">
          <button onclick="printData2();" class="btn btn-sm btn-primary">Print</button>
        </div>
      </div>
    </div>
    <div class="card-body">
      <h6 class="heading-small text-muted mb-4">
        Recipe Information
      </h6>
        <div class="pl-lg-4">
          <div class="row">
            <div class="col">
              <div class="card shadow">
                <div class="card-header border-0">
                  <h3 class="mb-0">Recipes table</h3>
                </div>
                <div class="table-responsive">
                  <table id="myTable" class="table align-items-center table-flush">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">Recipe</th>
                    <th scope="col">Author</th>
                    <th scope="col">Date Added</th>
                    <th scope="col">Status</th>
                    <th scope="col"></th>
                  </tr>
                  <tr>
                    <th scope="col"><input type="text" id="myInput" class="form-control" onkeyup="myFunction()" placeholder="Recipes..."></th>
                    <th scope="col"><input type="text" id="myInput1" class="form-control" onkeyup="myFunction1()" placeholder="Author..."></th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                  </tr>
                </thead>
                <tbody>
                {% for recipe in recipes %}
                  {% if recipe.privacy != 'PUBLIC' %}
                  <tr>
                    <td scope="row">
                      <a class="dropdown-item" href="{% url 'recipe-detail' recipe.id %}">{{ forloop.counter }}. {{ recipe.name | truncatechars:30 }}</a>
                    </td>
                    <td>
                      <a href="{% url 'user-recipe' recipe.author %}">{{ recipe.author }}</a>
                    </td>
                    <td>
                      {{ recipe.date_added | date:"d M Y"}}
                    </td>
                    <td>
                      {{ recipe.privacy }}
                    </td>
                    <td>
                      {% for heart in hearts %}
                          {% if heart.id == recipe.id %}
                            {{ heart.total_hearts }}
                          {% endif %}
                      {% endfor %}
                    </td>
                    <td class="text-right">
                      <div class="dropdown">
                        <a class="btn btn-sm btn-icon-only text-light" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <i class="fas fa-ellipsis-v"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                          <a class="dropdown-item" href="{% url 'recipe-detail' recipe.id %}">Update</a>
                        </div>
                      </div>
                    </td>
                  </tr>
                  {% endif %}
                {% endfor %}
                </tbody>
              </table>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
</div>
{% endblock content%}